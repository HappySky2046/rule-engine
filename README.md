# 规则引擎
为什么要开发
## 概念
### 基础概念
 1. 固定值：包括NUMBER, STRING, COLLECTION,
    BOOLEAN, JSONOBJECT，用户可以直接输入格式相对应的常量
 2. 元素：即参数，用户调用规则需要传入的参数（不是必须的），后面会详细解释
 3. 变量：
 	a. 主要功能为绑定函数进行计算，绑定的函数赋予了变量的功能；
 	b. 拥有参数，在计算过程中参数会转换为绑定的函数所需要的参数
 	c. 参数可以由变量，元素，固定值，（用户也可以继承Value类进行扩展）等组成
 4.  函数：包括用户自己开发的内部函数；也可以通过注册接口成为函数，接口将通过http的请求进行调用
 5. 条件：由左值 ，运算符号，右值组成，左值和右值可以是固定值，元素，变量
 6. 条件组：条件的集合，条件之间为&&关系
 7. 条件集：条件组的集合，条件组之间为 || 关系
 8. 规则：由条件和动作组成，条件计算结果为true,则返回动作的运算结果
 	 a. 条件可以是单个条件，条件组，条件集等
 	 b. 动作可以是固定值，元素，变量等
 9. 规则集：由多个规则组成，根据策略可以选择，
 	a. 按顺序运行规则，触发一个规则即返回
 	b. 按顺序运行所有规则，返回所有触发规则 的执行结果的集合
 	c. 随机运行所有规则，触发一个规则即返回
 10.  决策树：主要用来解决具有大量重复条件的规则集，会构建为一棵决策树，达到节省内存，提升运行速度，可以用表格进行编辑，支持让用户一键导入， 
 

## 特点

 1. 节省内存:通过树的数据结果 和享元模式的设计，达到节省内存的目的
 2. 提升运行速度:根据权重优化执行顺序，达到fast-fail，从而提升速度
 3. 快速接入其它系统 ：可以直接注册接口封装为函数，0成本接入其它系统，不需要迁入其它系统的代码 

## 设计
![在这里插入图片描述](https://raw.githubusercontent.com/zjb-it/rule-engine/master/screenshot/structure.jpg)
规则引擎主要包含3种类型的规则及一个函数容器

 1. 规则：主要包含条件及结果，条件可以是单个条件，条件组，及条件集，加载规则时，在不改变执行结果的情况下，默认会根据条件的权重进行优化排序，以提高执行效率，条件==true, 则返回结果
 2. 规则集：规则的集合，加载规则集时，在不改变执行结果的情况下，默认会根据规则的权重进行优化排序，以提高执行效率，根据选择的执行策略，返回相对应的结果
 3. 决策表：可以理解为一种特别的规则集，其中的规则都拥有类似的条件，方便用户导入，加载决策表时，会构建决策树以节省内存，提高执行效率
 
 

## 样例
[详见测试用例](https://github.com/zjb-it/rule-engine/tree/master/src/test/java/com/zjb/ruleengine)
 
